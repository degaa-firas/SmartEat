const translations = {
    en: {
        nav_dashboard: "Dashboard",
        nav_inventory: "Inventory",
        nav_ai_insights: "AI Insights",
        nav_orders: "Orders",
        nav_team: "Team",
        nav_new: "NEW",
        search_placeholder: "Search orders, menu, or insights...",
        welcome_message: "Good Evening, Chef Ahmed ğŸ‘‹",
        ai_powered_insight: "AI-POWERED INSIGHT",
        ai_confidence: "98% Confidence",
        ai_insight_title: "High Demand Predicted: Chorba Frik",
        ai_insight_body: "Based on local weather (rainy) and historical weekend data, demand for Chorba Frik is expected to rise by <strong>25%</strong> tomorrow.",
        btn_auto_order: "Auto-Order Ingredients",
        btn_view_details: "View Details",
        stat_revenue: "Total Revenue",
        stat_waste: "Reduce Waste",
        stat_orders: "Active Orders",
        stat_trend_positive: "+12% vs last week",
        stat_trend_saved: "Saved this week",
        stat_trend_neutral: "Normal load",
        chart_revenue: "Revenue Trends",
        chart_inventory: "Inventory Health",
        chart_smart_decisions: "Smart Decisions Active",
        automation_title: "Smart Automation",
        auto_restock_title: "Auto-Restock Spices",
        auto_restock_desc: "Ras el Hanout is low. Order placed automatically.",
        auto_pricing_title: "Dynamic Pricing",
        auto_pricing_desc: "Adjust prices for Happy Hour (16:00 - 18:00).",
        user_role: "Manager",
        // Menu Page
        menu_title: "SmartEat - Digital Menu",
        category_all: "All Items",
        category_starter: "Starters",
        category_main: "Mains",
        category_dessert: "Desserts",
        category_drink: "Drinks",
        your_table: "Your Table",
        greeting_menu: "Good Evening! ğŸ‘‹",
        greeting_sub: "Ready to order delicious food?",
        search_menu: "Search for dishes...",
        current_order: "Current Order",
        empty_cart: "Your cart is empty",
        tap_add: "Tap + to add items",
        subtotal: "Subtotal",
        tax: "Tax (5%)",
        total: "Total",
        place_order: "Place Order",
        order_placed: "Order Placed!",
        order_success_msg: "The kitchen has received your order and started preparing it.",
        order_more: "Order More",

        // Orders Page
        kds_title: "Kitchen Display System",
        live: "LIVE",
        smart_batching: "Smart Batching",
        col_new: "New Orders",
        col_prep: "Preparing",
        col_ready: "Ready to Serve",
        btn_start: "Start Prep",
        btn_ready: "Mark Ready",
        btn_serve: "Serve Now",
        vip_tag: "VIP",

        // Team Page
        team_title: "Team Management",
        btn_add_staff: "Add Staff",
        stat_shift: "Current Shift",
        stat_active_staff: "Active",
        stat_top_performer: "Top Performer",
        stat_labor_cost: "Labor Cost",
        staff_members: "Staff Members",
        badge_on_shift: "On Shift",
        badge_break: "Break",
        badge_off: "Off Duty",
        staff_orders: "Orders",
        staff_rating: "Rating",
        staff_dishes: "Dishes",
        staff_speed: "Speed",
        staff_deliveries: "Deliveries",
        staff_time: "Time",
        staff_guests: "Guests",
        staff_shift: "Shift",
        btn_profile: "View Profile",

        // Inventory Page
        inventory_title: "Inventory Management",
        btn_add_item: "Add Item",
        smart_restock: "SMART RESTOCK SUGGESTION",
        stock_levels_title: "Stock Levels",
        search_items: "Search items...",
        th_item: "Item Name",
        th_category: "Category",
        th_stock: "Stock Level",
        th_status: "Status",
        th_supplier: "Supplier",
        th_actions: "Actions",
        badge_low: "Low Stock",
        badge_good: "Good",
        badge_medium: "Medium",
        btn_restock: "Restock",
        unit_left: "left",
        unit_units: "units",

        // Common
        currency_dzd: "DZD",
        unit_kg: "kg"
    },
    fr: {
        nav_dashboard: "Tableau de bord",
        nav_inventory: "Inventaire",
        nav_ai_insights: "IA Insights",
        nav_orders: "Commandes",
        nav_team: "Ã‰quipe",
        nav_new: "NOUVEAU",
        search_placeholder: "Rechercher commandes, menu ou insights...",
        welcome_message: "Bonsoir, Chef Ahmed ğŸ‘‹",
        ai_powered_insight: "APERÃ‡U ALIMENTÃ‰ PAR IA",
        ai_confidence: "Confiance 98%",
        ai_insight_title: "Forte demande prÃ©vue : Chorba Frik",
        ai_insight_body: "BasÃ© sur la mÃ©tÃ©o locale (pluvieux) et les donnÃ©es historiques, la demande pour la Chorba Frik devrait augmenter de <strong>25%</strong> demain.",
        btn_auto_order: "Commander IngrÃ©dients",
        btn_view_details: "Voir DÃ©tails",
        stat_revenue: "Revenu Total",
        stat_waste: "RÃ©duire Gaspillage",
        stat_orders: "Commandes Actives",
        stat_trend_positive: "+12% vs semaine derniÃ¨re",
        stat_trend_saved: "Ã‰conomisÃ© cette semaine",
        stat_trend_neutral: "Charge normale",
        chart_revenue: "Tendances des Revenus",
        chart_inventory: "SantÃ© des Stocks",
        chart_smart_decisions: "DÃ©cisions Intelligentes Actives",
        automation_title: "Automatisation Intelligente",
        auto_restock_title: "RÃ©approvisionnement Ã‰pices",
        auto_restock_desc: "Ras el Hanout est bas. Commande placÃ©e automatiquement.",
        auto_pricing_title: "Tarification Dynamique",
        auto_pricing_desc: "Ajuster prix pour Happy Hour (16:00 - 18:00).",
        user_role: "GÃ©rant",

        // Menu Page
        menu_title: "SmartEat - Menu NumÃ©rique",
        category_all: "Tout",
        category_starter: "EntrÃ©es",
        category_main: "Plats",
        category_dessert: "Desserts",
        category_drink: "Boissons",
        your_table: "Votre Table",
        greeting_menu: "Bonsoir ! ğŸ‘‹",
        greeting_sub: "PrÃªt Ã  commander ?",
        search_menu: "Rechercher des plats...",
        current_order: "Commande Actuelle",
        empty_cart: "Votre panier est vide",
        tap_add: "Appuyez sur + pour ajouter",
        subtotal: "Sous-total",
        tax: "Taxe (5%)",
        total: "Total",
        place_order: "Passer la commande",
        order_placed: "Commande PassÃ©e !",
        order_success_msg: "La cuisine a reÃ§u votre commande et commence la prÃ©paration.",
        order_more: "Commander Plus",

        // Orders Page
        kds_title: "SystÃ¨me d'Affichage Cuisine",
        live: "EN DIRECT",
        smart_batching: "Regroupement Intelligent",
        col_new: "Nouvelles Commandes",
        col_prep: "En PrÃ©paration",
        col_ready: "PrÃªt Ã  Servir",
        btn_start: "Lancer",
        btn_ready: "Marquer PrÃªt",
        btn_serve: "Servir",
        vip_tag: "VIP",

        // Team Page
        team_title: "Gestion d'Ã‰quipe",
        btn_add_staff: "Ajouter Staff",
        stat_shift: "Service Actuel",
        stat_active_staff: "Actif",
        stat_top_performer: "Meilleur EmployÃ©",
        stat_labor_cost: "CoÃ»t Main d'Å“uvre",
        staff_members: "Membres du Staff",
        badge_on_shift: "En Service",
        badge_break: "Pause",
        badge_off: "Hors Service",
        staff_orders: "Commandes",
        staff_rating: "Note",
        staff_dishes: "Plats",
        staff_speed: "Vitesse",
        staff_deliveries: "Livraisons",
        staff_time: "Temps",
        staff_guests: "InvitÃ©s",
        staff_shift: "Service",
        btn_profile: "Voir Profil",

        // Inventory Page
        inventory_title: "Gestion des Stocks",
        btn_add_item: "Ajouter Article",
        smart_restock: "SUGGESTION RÃ‰APPRO SMART",
        stock_levels_title: "Niveaux de Stock",
        search_items: "Rechercher articles...",
        th_item: "Article",
        th_category: "CatÃ©gorie",
        th_stock: "Niveau Stock",
        th_status: "Statut",
        th_supplier: "Fournisseur",
        th_actions: "Actions",
        badge_low: "Stock Faible",
        badge_good: "Bon",
        badge_medium: "Moyen",
        btn_restock: "RÃ©approvisionner",
        unit_left: "restant",
        unit_units: "unitÃ©s",

        currency_dzd: "DZD",
        unit_kg: "kg"
    },
    ar: {
        nav_dashboard: "Ù„ÙˆØ­Ø© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©",
        nav_inventory: "Ø§Ù„Ù…Ø®Ø²ÙˆÙ†",
        nav_ai_insights: "Ø±Ø¤Ù‰ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ",
        nav_orders: "Ø§Ù„Ø·Ù„Ø¨Ø§Øª",
        nav_team: "Ø§Ù„ÙØ±ÙŠÙ‚",
        nav_new: "Ø¬Ø¯ÙŠØ¯",
        search_placeholder: "Ø§Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§ØªØŒ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©ØŒ Ø£Ùˆ Ø§Ù„Ø±Ø¤Ù‰...",
        welcome_message: "Ù…Ø³Ø§Ø¡ Ø§Ù„Ø®ÙŠØ±ØŒ Ø´ÙŠÙ Ø£Ø­Ù…Ø¯ ğŸ‘‹",
        ai_powered_insight: "Ø±Ø¤ÙŠØ© Ù…Ø¯Ø¹ÙˆÙ…Ø© Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ",
        ai_confidence: "Ø«Ù‚Ø© 98%",
        ai_insight_title: "ØªÙˆÙ‚Ø¹Ø§Øª Ø¨Ø·Ù„Ø¨ Ø¹Ø§Ù„ÙŠ: Ø´Ø±Ø¨Ø© ÙØ±ÙŠÙƒ",
        ai_insight_body: "Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù‚Ø³ Ø§Ù„Ù…Ø­Ù„ÙŠ (Ù…Ø·Ø±) ÙˆØ§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠØ©ØŒ Ù…Ù† Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ Ø£Ù† ÙŠØ±ØªÙØ¹ Ø§Ù„Ø·Ù„Ø¨ Ø¹Ù„Ù‰ Ø´Ø±Ø¨Ø© ÙØ±ÙŠÙƒ Ø¨Ù†Ø³Ø¨Ø© <strong>25%</strong> ØºØ¯Ø§Ù‹.",
        btn_auto_order: "Ø·Ù„Ø¨ Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹",
        btn_view_details: "Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„",
        stat_revenue: "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª",
        stat_waste: "ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù‡Ø¯Ø±",
        stat_orders: "Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©",
        stat_trend_positive: "+12% Ù…Ù‚Ø§Ø¨Ù„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ù…Ø§Ø¶ÙŠ",
        stat_trend_saved: "ØªÙ… ØªÙˆÙÙŠØ±Ù‡Ø§ Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹",
        stat_trend_neutral: "Ø­Ù…Ù„ Ø·Ø¨ÙŠØ¹ÙŠ",
        chart_revenue: "Ø§ØªØ¬Ø§Ù‡Ø§Øª Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª",
        chart_inventory: "ØµØ­Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†",
        chart_smart_decisions: "Ù‚Ø±Ø§Ø±Ø§Øª Ø°ÙƒÙŠØ© Ù†Ø´Ø·Ø©",
        automation_title: "Ø§Ù„Ø£ØªÙ…ØªØ© Ø§Ù„Ø°ÙƒÙŠØ©",
        auto_restock_title: "Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹Ø¨Ø¦Ø© Ø§Ù„ØªÙˆØ§Ø¨Ù„",
        auto_restock_desc: "Ø±Ø£Ø³ Ø§Ù„Ø­Ø§Ù†ÙˆØª Ù…Ù†Ø®ÙØ¶. ØªÙ… ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ø·Ù„Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹.",
        auto_pricing_title: "ØªØ³Ø¹ÙŠØ± Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ",
        auto_pricing_desc: "ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ù„Ø³Ø§Ø¹Ø© Ø§Ù„Ø³Ø¹Ø§Ø¯Ø© (16:00 - 18:00).",
        user_role: "Ù…Ø¯ÙŠØ±",

        // Menu Page
        menu_title: "Ø³Ù…Ø§Ø±Øª Ø¥ÙŠØª - Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©",
        category_all: "Ø§Ù„ÙƒÙ„",
        category_starter: "Ù…Ù‚Ø¨Ù„Ø§Øª",
        category_main: "Ø£Ø·Ø¨Ø§Ù‚ Ø±Ø¦ÙŠØ³ÙŠØ©",
        category_dessert: "Ø­Ù„ÙˆÙŠØ§Øª",
        category_drink: "Ù…Ø´Ø±ÙˆØ¨Ø§Øª",
        your_table: "Ø·Ø§ÙˆÙ„ØªÙƒ",
        greeting_menu: "Ù…Ø³Ø§Ø¡ Ø§Ù„Ø®ÙŠØ±! ğŸ‘‹",
        greeting_sub: "Ø¬Ø§Ù‡Ø² Ù„Ø·Ù„Ø¨ Ø·Ø¹Ø§Ù… Ù„Ø°ÙŠØ°ØŸ",
        search_menu: "Ø§Ø¨Ø­Ø« Ø¹Ù† Ø£Ø·Ø¨Ø§Ù‚...",
        current_order: "Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø­Ø§Ù„ÙŠ",
        empty_cart: "Ø¹Ø±Ø¨Ø© Ø§Ù„ØªØ³ÙˆÙ‚ ÙØ§Ø±ØºØ©",
        tap_add: "Ø§Ø¶ØºØ· + Ù„Ø¥Ø¶Ø§ÙØ© Ø¹Ù†Ø§ØµØ±",
        subtotal: "Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ",
        tax: "Ø¶Ø±ÙŠØ¨Ø© (5%)",
        total: "Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹",
        place_order: "ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨",
        order_placed: "ØªÙ… Ø§Ù„Ø·Ù„Ø¨!",
        order_success_msg: "Ø§Ø³ØªÙ„Ù… Ø§Ù„Ù…Ø·Ø¨Ø® Ø·Ù„Ø¨Ùƒ ÙˆØ¨Ø¯Ø£ ÙÙŠ ØªØ­Ø¶ÙŠØ±Ù‡.",
        order_more: "Ø·Ù„Ø¨ Ø§Ù„Ù…Ø²ÙŠØ¯",

        // Orders Page
        kds_title: "Ù†Ø¸Ø§Ù… Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø·Ø¨Ø®",
        live: "Ù…Ø¨Ø§Ø´Ø±",
        smart_batching: "ØªØ¬Ù…ÙŠØ¹ Ø°ÙƒÙŠ",
        col_new: "Ø·Ù„Ø¨Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©",
        col_prep: "Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¶ÙŠØ±",
        col_ready: "Ø¬Ø§Ù‡Ø² Ù„Ù„ØªÙ‚Ø¯ÙŠÙ…",
        btn_start: "Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ø¶ÙŠØ±",
        btn_ready: "ØªØ¬Ù‡ÙŠØ²",
        btn_serve: "ØªÙ‚Ø¯ÙŠÙ…",
        vip_tag: "Ù‡Ø§Ù…",

        // Team Page
        team_title: "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙØ±ÙŠÙ‚",
        btn_add_staff: "Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¸Ù",
        stat_shift: "Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©",
        stat_active_staff: "Ù†Ø´Ø·",
        stat_top_performer: "Ø§Ù„Ø£ÙØ¶Ù„ Ø£Ø¯Ø§Ø¡Ù‹",
        stat_labor_cost: "ØªÙƒÙ„ÙØ© Ø§Ù„Ø¹Ù…Ù„",
        staff_members: "Ø£Ø¹Ø¶Ø§Ø¡ Ø§Ù„ÙØ±ÙŠÙ‚",
        badge_on_shift: "ÙÙŠ Ø§Ù„Ø®Ø¯Ù…Ø©",
        badge_break: "Ø§Ø³ØªØ±Ø§Ø­Ø©",
        badge_off: "Ø®Ø§Ø±Ø¬ Ø§Ù„Ø®Ø¯Ù…Ø©",
        staff_orders: "Ø·Ù„Ø¨Ø§Øª",
        staff_rating: "ØªÙ‚ÙŠÙŠÙ…",
        staff_dishes: "Ø£Ø·Ø¨Ø§Ù‚",
        staff_speed: "Ø³Ø±Ø¹Ø©",
        staff_deliveries: "ØªÙˆØµÙŠÙ„",
        staff_time: "ÙˆÙ‚Øª",
        staff_guests: "Ø¶ÙŠÙˆÙ",
        staff_shift: "Ø®Ø¯Ù…Ø©",
        btn_profile: "Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„Ù",

        // Inventory Page
        inventory_title: "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†",
        btn_add_item: "Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ±",
        smart_restock: "Ø§Ù‚ØªØ±Ø§Ø­ Ø¥Ø¹Ø§Ø¯Ø© ØªØ²ÙˆÙŠØ¯ Ø°ÙƒÙŠ",
        stock_levels_title: "Ù…Ø³ØªÙˆÙŠØ§Øª Ø§Ù„Ù…Ø®Ø²ÙˆÙ†",
        search_items: "Ø¨Ø­Ø« Ø¹Ù† Ø¹Ù†Ø§ØµØ±...",
        th_item: "Ø§Ù„Ø¹Ù†ØµØ±",
        th_category: "Ø§Ù„ÙØ¦Ø©",
        th_stock: "Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†",
        th_status: "Ø§Ù„Ø­Ø§Ù„Ø©",
        th_supplier: "Ø§Ù„Ù…ÙˆØ±Ø¯",
        th_actions: "Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª",
        badge_low: "Ù…Ø®Ø²ÙˆÙ† Ù…Ù†Ø®ÙØ¶",
        badge_good: "Ø¬ÙŠØ¯",
        badge_medium: "Ù…ØªÙˆØ³Ø·",
        btn_restock: "Ø¥Ø¹Ø§Ø¯Ø© ØªØ²ÙˆÙŠØ¯",
        unit_left: "Ù…ØªØ¨Ù‚ÙŠ",
        unit_units: "ÙˆØ­Ø¯Ø©",

        currency_dzd: "Ø¯.Ø¬",
        unit_kg: "ÙƒØº"
    }
};

// Localization Logic
document.addEventListener('DOMContentLoaded', function () {
    initLocalization();
});

function initLocalization() {
    const savedLang = localStorage.getItem('smartEatLang') || 'en';
    setLanguage(savedLang);

    // Bind click events to any element with class 'lang-btn' or inside '.lang-switch'
    window.setLanguage = setLanguage; // Make global
    
    // Auto-bind to existing switchers
    const langBtns = document.querySelectorAll('.lang-switch span, .lang-btn');
    langBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            const langText = btn.textContent.trim().toLowerCase();
            const lang = langText === 'english' ? 'en' : langText === 'francais' ? 'fr' : langText === 'ar' ? 'ar' : langText; 
            // Handle simple text codes 'EN', 'FR', 'AR'
            setLanguage(lang.substring(0, 2).toLowerCase());
        });
    });
}

function setLanguage(lang) {
    if (!translations[lang]) return;

    // Save preference
    localStorage.setItem('smartEatLang', lang);

    // Update active state in switcher
    document.querySelectorAll('.lang-switch span, .lang-btn').forEach(btn => {
        const btnLang = btn.textContent.trim().substring(0, 2).toLowerCase();
        if (btnLang === lang) {
            btn.classList.add('active');
        } else {
            btn.classList.remove('active');
        }
    });

    // Handle RTL
    if (lang === 'ar') {
        document.documentElement.dir = 'rtl';
        document.documentElement.lang = 'ar';
    } else {
        document.documentElement.dir = 'ltr';
        document.documentElement.lang = lang;
    }

    // Apply translations
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (translations[lang][key]) {
            if (element.tagName === 'INPUT' && element.getAttribute('placeholder')) {
                element.placeholder = translations[lang][key];
            } else {
                element.innerHTML = translations[lang][key];
            }
        }
    });
}

